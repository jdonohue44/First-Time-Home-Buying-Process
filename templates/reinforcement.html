{% extends "base.html" %}

{% block title %}Quick Check: Step {{ step_id + 1 }}{% endblock %}

{% block content %}
<div class="title">Quick Check ‚Äì Step {{ step_id + 1 }}</div>

<div class="content">
    <form method="POST" action="{{ url_for('reinforcement_answer', step_id=step_id) }}" id="quick-check-form">
        <div class="qcard" style="width: 600px;">
            <div class="qcard-title">{{ question.question }}</div>
            <div class="qcard-desc">
                <div class="options-boxes">
                    {% for option in question.options %}
                    <input type="radio" name="answer" value="{{ option }}" id="option-{{ loop.index }}" hidden />
                    <label class="option-box" for="option-{{ loop.index }}">{{ option }}</label>
                    {% endfor %}
                </div>

                <!-- Optional hint -->
                <p class="text-muted" style="margin-top: 16px;"><em>üí° Hint: {{ question.hint }}</em></p>

                <!-- Optional warning message -->
                <div id="warning-message" style="color: #c62015; font-weight: bold; margin-top: 20px; display: none;">
                    ‚ö†Ô∏è Please select an option before continuing.
                </div>

                <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                    <a href="{{ url_for('learning_step', step_id=step_id) }}"
                       style="text-decoration: none; background-color: lightgrey; border: 1px solid black;
                              color: black; padding: 8px 16px;">‚Üê Back to Step</a>

                    <button type="submit" style="padding: 8px 16px;">Continue ‚Üí</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("quick-check-form");
    const warning = document.getElementById("warning-message");

    form.addEventListener("submit", function (e) {
        const checked = document.querySelector("input[name='answer']:checked");

        if (!checked) {
            e.preventDefault();
            warning.style.display = "block";
        } else {
            warning.style.display = "none";
        }
    });
});
</script>
{% endblock %}
