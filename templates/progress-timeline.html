{% extends "base.html" %}

{% block content %}
<div class="title">Home-Buying Timeline</div>

<div class="row">
  <div class="col-3"></div>
  <div class="col-6">
    <hr>
  </div>
  <div class="col-3"></div>
</div>

<div class="container mt-2 text-center">
  <!-- Timeline Arrow Layout (static steps like timeline.html) -->
  <div class="timeline-arrow-container mb-4">
    <div class="arrow-shaft" style="font-family: 'Times New Roman', serif;">
      <div class="prg-timeline-slot {% if id >= 1 %}active-step{% endif %}">Get Approval</div>
      <div class="prg-timeline-slot {% if id >= 2 %}active-step{% endif %}">Find an Agent</div>
      <div class="prg-timeline-slot {% if id >= 2 %}active-step{% endif %}">Tour Homes</div>
      <div class="prg-timeline-slot {% if id >= 3 %}active-step{% endif %}">Make Offer</div>
      <div class="prg-timeline-slot {% if id >= 3 %}active-step{% endif %}">Finalize Mortgage</div>
      <div class="prg-timeline-slot {% if id >= 3 %}active-step{% endif %}">Close Sale</div>
    </div>
    <div class="arrow-head"></div>
  </div>

  <!-- Phase Description -->
  <div class="mb-4 timeline-phase-instructions">
    {% if id == 1 %}
      <p>Contact the bank and get your pre-approval amount!</p>
    {% elif id == 2 %}
      <p>Find a real estate agent around your area of interest. Tour homes within your pre-approved range!</p>
    {% elif id == 3 %}
      <p>Make your best offer. Finalize the mortgage with your bank. Provide documents requested by your agent and lawyer!</p>
    {% else %}
      <p>Follow the steps above to understand the home-buying journey.</p>
    {% endif %}
  </div>

  <!-- Dynamic Character Images by Phase -->
  <div class="row justify-content-center mb-4">
    {% if id >= 1 %}
      <div class="col-6 col-sm-3 mb-3">
        <img src="{{ url_for('static', filename='img/buyer.png') }}" class="img-fluid character-img" alt="Buyer">
        <p>Buyer</p>
      </div>
    {% endif %}
    {% if id >= 2 %}
      <div class="col-6 col-sm-3 mb-3">
        <img src="{{ url_for('static', filename='img/agent.png') }}" class="img-fluid character-img" alt="Agent">
        <p>Real Estate Agent</p>
      </div>
    {% endif %}
    {% if id == 3 %}
      <div class="col-6 col-sm-3 mb-3">
        <img src="{{ url_for('static', filename='img/seller.png') }}" class="img-fluid character-img" alt="Seller">
        <p>Seller</p>
      </div>
      <div class="col-6 col-sm-3 mb-3">
        <img src="{{ url_for('static', filename='img/lawyer.png') }}" class="img-fluid character-img" alt="Lawyer">
        <p>Lawyer</p>
      </div>
    {% endif %}
  </div>

  <!-- Navigation Arrows -->
  <div class="d-flex justify-content-between align-items-center px-5">
    <!-- Back Button -->
    {% if id == 1 %}
      <a href="{{ url_for('players_interactive') }}">
        <img src="{{ url_for('static', filename='img/left-arrow.png') }}" alt="Back" style="height: 60px;">
      </a>
    {% elif id == 2 %}
      <a href="{{ url_for('progress_timeline', id=1) }}">
        <img src="{{ url_for('static', filename='img/left-arrow.png') }}" alt="Back" style="height: 60px;">
      </a>
    {% elif id == 3 %}
      <a href="{{ url_for('progress_timeline', id=2) }}">
        <img src="{{ url_for('static', filename='img/left-arrow.png') }}" alt="Back" style="height: 60px;">
      </a>
    {% endif %}
  
    <!-- Next Button -->
    {% if id == 1 %}
      <a href="{{ url_for('progress_timeline', id=2) }}">
        <img src="{{ url_for('static', filename='img/right-arrow.png') }}" alt="Next" style="height: 60px;">
      </a>
    {% elif id == 2 %}
      <a href="{{ url_for('progress_timeline', id=3) }}">
        <img src="{{ url_for('static', filename='img/right-arrow.png') }}" alt="Next" style="height: 60px;">
      </a>
    {% elif id == 3 %}
      <a href="{{ url_for('learning_step', step_id=0) }}">
        <img src="{{ url_for('static', filename='img/right-arrow.png') }}" alt="Next" style="height: 60px;">
      </a>
    {% endif %}
  </div>
  

</div>
{% endblock %}

{% block styles %}
<style>
  .timeline-arrow-container {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .arrow-shaft {
    display: flex;
    flex-wrap: wrap;
    border-bottom: 6px solid #555;
    position: relative;
    width: 100%;
    max-width: 900px;
  }

  .arrow-head {
    width: 0;
    height: 0;
    border-top: 12px solid transparent;
    border-bottom: 12px solid transparent;
    border-left: 20px solid #555;
    margin-left: -1px;
  }

  .timeline-slot {
    flex: 1;
    padding: 12px 6px;
    text-align: center;
    font-weight: bold;
    border-right: 1px dashed #ccc;
    font-size: 14px;
  }

  .timeline-slot:last-child {
    border-right: none;
  }

  .timeline-phase-instructions p {
    font-size: 18px;
    font-family: 'Times New Roman', serif;
  }

  .character-img {
    max-height: 140px;
  }
</style>
{% endblock %}
